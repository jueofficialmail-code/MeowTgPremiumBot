from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, ContextTypes

# á€á€„á€·á€º Bot Token á€€á€­á€¯ á€¤á€”á€±á€›á€¬á€á€½á€„á€º á€‘á€Šá€·á€ºá€•á€«
TOKEN = "8150364428:AAEHU8koxGo6Sp_M6JAMFDeRkCgwdh_HBGo" 

# /start command á€€á€­á€¯ á€€á€­á€¯á€„á€ºá€á€½á€šá€ºá€™á€Šá€·á€º function
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€á€°á€€ /start command á€•á€±á€¸á€á€±á€¬á€¡á€á€« message á€•á€¼á€”á€ºá€•á€­á€¯á€·á€á€¼á€„á€ºá€¸"""
    
    # áá‹ á€•á€¼á€á€œá€­á€¯á€á€±á€¬ á€…á€¬á€á€¬á€¸ (TEX)
    # MarkdownV2 á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€¼á€®á€¸ á€…á€¬á€œá€¯á€¶á€¸á€‘á€°, á€…á€¬á€œá€¯á€¶á€¸á€…á€±á€¬á€„á€ºá€¸ á€á€½á€± á€‘á€Šá€·á€ºá€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹
    # á€á€„á€ºá€¹á€á€»á€¬á€–á€±á€¬á€ºá€™á€¼á€°á€œá€¬á€™á€»á€¬á€¸á€¡á€á€½á€€á€º LaTeX rendering á€œá€¯á€•á€ºá€á€²á€· á€”á€Šá€ºá€¸á€œá€™á€ºá€¸á€€á€­á€¯ á€á€®á€¸á€á€¼á€¬á€¸á€›á€¾á€¬á€–á€½á€±á€›á€•á€«á€™á€šá€ºá‹ 
    # Telegram á€›á€²á€· built-in message á€™á€¾á€¬á€á€±á€¬á€· 'TEX' á€€á€­á€¯ á€á€­á€¯á€€á€ºá€›á€­á€¯á€€á€º render á€œá€¯á€•á€ºá€œá€­á€¯á€·á€™á€›á€•á€«á€˜á€°á€¸á‹
    # á€¤á€¥á€•á€™á€¬á€á€½á€„á€º á€…á€¬á€á€¬á€¸á€€á€­á€¯ á€¡á€œá€±á€¸á€•á€±á€¸á€–á€±á€¬á€ºá€•á€¼á€›á€”á€º MarkdownV2 á€€á€­á€¯ á€á€¯á€¶á€¸á€‘á€¬á€¸á€•á€«á€á€Šá€ºá‹
    message_text = (
        "**ğŸ‰ á€€á€¼á€­á€¯á€†á€­á€¯á€•á€«á€á€šá€ºáŠ á€€á€»á€½á€”á€ºá€™ Bot á€›á€²á€· á€…á€™á€ºá€¸á€á€•á€ºá€…á€¬á€á€¬á€¸á€•á€«**\n\n"
        "á€’á€®á€”á€±á€›á€¬á€™á€¾á€¬ á€á€„á€ºá€œá€­á€¯á€á€»á€„á€ºá€á€²á€· *TEX formula* á€€á€­á€¯ á€›á€­á€¯á€¸á€›á€­á€¯á€¸á€…á€¬á€á€¬á€¸ (á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º) "
        "á€•á€¯á€¶á€¡á€–á€¼á€…á€º á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€•á€¼á€®á€¸ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€º:\n"
        "á€¥á€•á€™á€¬: `E=mc^2` á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º $\frac{1}{\sqrt{2\\pi}}$\n\n"
        "á€¡á€±á€¬á€€á€ºá€€ **á€á€œá€¯á€á€ºá€œá€±á€¸á€á€½á€±** á€€á€­á€¯ á€…á€™á€ºá€¸á€€á€¼á€Šá€·á€ºá€•á€«á€¦á€¸á‹"
    )
    
    # á‚á‹ Button (Inline Keyboard) á€™á€»á€¬á€¸
    # á€¡á€á€”á€ºá€¸á€œá€­á€¯á€€á€º á€á€œá€¯á€á€ºá€”á€¾á€…á€ºá€á€¯ á€‘á€Šá€·á€ºá€‘á€¬á€¸á€•á€«á€á€Šá€ºá‹
    keyboard = [
        [
            InlineKeyboardButton("âœ¨ á€›á€½á€±á€¸á€…á€›á€¬ (á€€)", callback_data='option_a'),
            InlineKeyboardButton("ğŸ”— Google á€á€­á€¯á€·", url='https://www.google.com')
        ],
        [InlineKeyboardButton("âœ… á€›á€½á€±á€¸á€…á€›á€¬ (á€)", callback_data='option_b')]
    ]

    reply_markup = InlineKeyboardMarkup(keyboard)

    # áƒá‹ á€•á€¯á€¶ (Image) á€•á€­á€¯á€·á€á€¼á€„á€ºá€¸
    # á€á€„á€ºá€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€œá€­á€¯á€á€±á€¬ á€•á€¯á€¶á URL á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º Telegram file ID
    image_url = "á€á€„á€·á€º_á€•á€¯á€¶_URL_á€’á€®á€”á€±á€›á€¬á€™á€¾á€¬_á€‘á€Šá€·á€ºá€•á€«" # á€¥á€•á€™á€¬: "https://picsum.photos/400/200"

    # á€•á€¯á€¶á€€á€­á€¯ á€¡á€›á€„á€ºá€•á€­á€¯á€·á€•á€«
    # á€•á€¯á€¶á€”á€²á€·á€¡á€á€° caption (á€…á€¬á€á€”á€ºá€¸) á€œá€Šá€ºá€¸ á€•á€­á€¯á€·á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹
    await update.message.reply_photo(
        photo=image_url,
        caption="ğŸ–¼ï¸ á€’á€«á€€ á€á€„á€ºá€á€±á€¬á€„á€ºá€¸á€†á€­á€¯á€‘á€¬á€¸á€á€²á€· **á€•á€¯á€¶** á€–á€¼á€…á€ºá€•á€«á€á€šá€º"
    )
    
    # á„á‹ á€•á€¯á€¶á€›á€²á€·á€¡á€±á€¬á€€á€ºá€™á€¾á€¬ á€á€œá€¯á€á€ºá€á€½á€±á€•á€«á€á€²á€· á€™á€€á€ºá€†á€±á€·á€á€ºá€»á€€á€­á€¯ á€‘á€•á€ºá€•á€­á€¯á€·á€•á€«
    # á€•á€¯á€¶á€”á€²á€· á€á€œá€¯á€á€ºá€á€½á€±á€€á€­á€¯ á€á€…á€ºá€á€¯á€á€Šá€ºá€¸á€™á€¾á€¬ á€•á€­á€¯á€·á€á€»á€„á€ºá€›á€„á€ºá€á€±á€¬á€· caption á€‘á€²á€™á€¾á€¬ á€á€œá€¯á€á€ºá€‘á€Šá€·á€ºá€›á€•á€«á€™á€šá€ºá‹
    # á€’á€®á€¥á€•á€™á€¬á€™á€¾á€¬á€á€±á€¬á€· á€•á€¯á€¶á€€á€­á€¯ á€¡á€›á€„á€ºá€•á€­á€¯á€·á€•á€¼á€®á€¸áŠ á€á€œá€¯á€á€ºá€•á€«á€á€²á€· á€…á€¬á€á€¬á€¸á€€á€­á€¯ á€”á€±á€¬á€€á€ºá€™á€¾ á€•á€­á€¯á€·á€‘á€¬á€¸á€•á€«á€á€šá€ºá‹
    await update.message.reply_text(
        text=message_text, 
        reply_markup=reply_markup,
        parse_mode='MarkdownV2'
    )

def main() -> None:
    """Bot á€€á€­á€¯ á€…á€á€„á€ºá€¡á€œá€¯á€•á€ºá€œá€¯á€•á€ºá€…á€±á€á€¼á€„á€ºá€¸"""
    # Application builder á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€¼á€®á€¸ Bot á€€á€­á€¯ á€á€Šá€ºá€†á€±á€¬á€€á€ºá€•á€«á‹
    application = Application.builder().token(TOKEN).build()

    # /start command á€€á€­á€¯ start function á€”á€²á€· á€á€»á€­á€á€ºá€†á€€á€ºá€•á€«
    application.add_handler(CommandHandler("start", start))

    # Bot á€€á€­á€¯ Polling á€…á€”á€…á€ºá€”á€²á€· á€…á€á€„á€º Run á€•á€« (Server á€™á€œá€­á€¯á€¡á€•á€ºá€•á€«)
    # Webhook á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€œá€­á€¯á€•á€«á€€áŠ hosting á€¡á€á€½á€€á€º á€•á€¼á€„á€ºá€†á€„á€ºá€›á€•á€«á€™á€Šá€ºá‹
    print("Bot á€…á€á€„á€º á€¡á€œá€¯á€•á€ºá€œá€¯á€•á€ºá€”á€±á€•á€«á€•á€¼á€®...")
    application.run_polling(poll_interval=3)

if __name__ == "__main__":
    main()
  
